<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>OLX Application</title>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"
    integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css">
  <!-- Bootstrap core CSS -->
  <link href="../css/bootstrap.min.css" rel="stylesheet">
  <!-- Material Design Bootstrap -->
  <link href="../css/mdb.min.css" rel="stylesheet">
  <!-- Your custom styles (optional) -->
  <link href="../css/style.css" rel="stylesheet">
</head>

<body>

  <!--Navbar-->
  <nav class="navbar navbar-expand-lg navbar-dark primary-color">

    <!-- Navbar brand -->
    <a class="navbar-brand" href="../index.html">OLX</a>

    <!-- Collapse button -->
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#basicExampleNav"
      aria-controls="basicExampleNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="basicExampleNav">

      <div class="form-inline my-2 my-lg-0">
        <input class="form-control" type="search" placeholder="Search" onkeyup="filter(this)" aria-label="Search">
        <button class="btn btn-outline-white btn-md my-2 my-sm-0 ml-3" type="submit">Search</button>
      </div>

      <div class="form-inline ml-auto">
        <ul class="navbar-nav ml-auto nav-flex-icons">
          <li class="nav-item">
            <a class="nav-link waves-effect waves-light" onclick="show_users_list()">
              <i class="fab fa-rocketchat nav-icons"></i>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link waves-effect waves-light">
              <i class="far fa-bell nav-icons"></i>
            </a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink-333" data-toggle="dropdown"
              aria-haspopup="true" aria-expanded="false">
              <i class="fas fa-user"></i>
            </a>
            <div class="dropdown-menu dropdown-menu-right dropdown-default"
              aria-labelledby="navbarDropdownMenuLink-333">
              <a class="dropdown-item" href="#">My Adds</a>
              <a class="dropdown-item" href="#">Profile</a>
              <a class="dropdown-item" onclick="logout()">Log Out</a>
            </div>
          </li>
        </ul>

        <ul class="navbar-nav">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true"
              aria-expanded="false">Login</a>
            <div class="dropdown-menu dropdown-primary" aria-labelledby="navbarDropdownMenuLink">
              <a class="dropdown-item" href="pages/login/signup.html">Sign Up</a>
              <a class="dropdown-item" href="pages/login/signin.html">Sign In</a>
            </div>
          </li>
        </ul>
        <div>
          <button class="btn btn-outline-white btn-md my-2 my-sm-0 ml-3" onclick="check();">Sell</button>
        </div>
      </div>

    </div>
    <!-- Collapsible content -->

  </nav>
  <!--/.Navbar-->

  <div class="container-fluid">
    <div class="container">
      <div class="row">
        <div class="col-sm-2 col-md-2 col-lg-2">

            <div class="list-group">
                <button type="button" class="list-group-item list-group-item-action" onclick="car()" id="car">
                    Car
                </button>
                <button type="button" class="list-group-item list-group-item-action" onclick="phone()" id="phone">Phones</button>
                <button type="button" class="list-group-item list-group-item-action" onclick="laptop()" id="laptop">Laptop</button>
                <button type="button" class="list-group-item list-group-item-action" onclick="bikes()" id="bikes">Bikes</button>
                <button type="button" class="list-group-item list-group-item-action" onclick="property()" id="property">Property</button>
                <button type="button" class="list-group-item list-group-item-action" onclick="electronics()" id="electronics">Electronics</button>
              </div>

        </div>

        <div class="col-sm-10 col-md-10 col-lg-10" id='ads_div'>






        </div>
      </div>
    </div>
  </div>


  <!-- footer -->

  <!-- Footer -->
  <footer class="page-footer font-small light-gray">

    <!-- Footer Links -->
    <div class="container text-center text-md-left">

      <!-- Grid row -->
      <div class="row">

        <!-- Grid column -->
        <div class="col-md-3 mx-auto">

          <!-- Links -->
          <h5 class="font-weight-bold text-uppercase mt-3 mb-4">Popular Categories</h5>

          <ul class="list-unstyled">
            <li>
              <a href="#!">Cars</a>
            </li>
            <li>
              <a href="#!">Mobiles</a>
            </li>
            <li>
              <a href="#!">Motorcycles</a>
            </li>
            <li>
              <a href="#!">Electronics</a>
            </li>
          </ul>

        </div>
        <!-- Grid column -->

        <hr class="clearfix w-100 d-md-none">

        <!-- Grid column -->
        <div class="col-md-3 mx-auto">

          <!-- Links -->
          <h5 class="font-weight-bold text-uppercase mt-3 mb-4">POPULAR SEARCHES</h5>

          <ul class="list-unstyled">
            <li>
              <a href="#!">Laptops</a>
            </li>
            <li>
              <a href="#!">Bikes</a>
            </li>
            <li>
              <a href="#!">Appliances</a>
            </li>
            <li>
              <a href="#!">Used Cars</a>
            </li>
          </ul>

        </div>
        <!-- Grid column -->

        <hr class="clearfix w-100 d-md-none">

        <!-- Grid column -->
        <div class="col-md-3 mx-auto">

          <!-- Links -->
          <h5 class="font-weight-bold text-uppercase mt-3 mb-4">ABOUT</h5>

          <ul class="list-unstyled">
            <li>
              <a href="#!">Career</a>
            </li>
            <li>
              <a href="#!">About OLX Group</a>
            </li>
            <li>
              <a href="#!">Contact Us</a>
            </li>
            <li>
              <a href="#!">Link 4</a>
            </li>
          </ul>

        </div>
        <!-- Grid column -->

        <hr class="clearfix w-100 d-md-none">

        <!-- Grid column -->
        <div class="col-md-3 mx-auto">

          <!-- Links -->
          <h5 class="font-weight-bold text-uppercase mt-3 mb-4">Follow Us</h5>

          <ul class="list-unstyled list-inline">
            <li class="list-inline-item">
              <a href="#!"><i class="fab fa-facebook nav-icons"></i></a>
            </li>
            <li class="list-inline-item">
              <a href="#!"><i class="fab fa-twitter-square nav-icons"></i></a>
            </li>
            <li class="list-inline-item">
              <a href="#!"><i class="fab fa-instagram nav-icons"></i></a>
            </li>
          </ul>

        </div>
        <!-- Grid column -->

      </div>
      <!-- Grid row -->

    </div>
    <!-- Footer Links -->

    <!-- Copyright -->
    <div class="footer-copyright dark-gray text-center py-3">
      <span class="float-left footer-text-l">
        <span>Other Countries</span> Pakistan - South Africa - Kenya - Nigeria - Ghana
      </span>

      <span class="float-right footer-text-r">
        <span> Free Classifieds in Pakistan.</span> Â© 2006-2019 OLX
      </span>
    </div>
    <!-- Copyright -->

  </footer>
  <!-- Footer -->


  <!-- ====================================================================================== -->

  <!-- Central Modal Medium Success -->
  <div class="modal fade" id="addDetail" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-notify modal-primary modal-lg" role="document">
      <!--Content-->
      <div class="modal-content" id="add-modal">

      </div>
      <!--/.Content-->
    </div>
  </div>
  <!-- Central Modal Medium Success-->

</body>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.8.3/firebase.js"></script>
<script src="../js/app.js"></script>
<script src="../js/user.js"></script>


<!-- SCRIPTS -->
<!-- JQuery -->
<script type="text/javascript" src="../js/jquery-3.3.1.min.js"></script>
<!-- Bootstrap tooltips -->
<script type="text/javascript" src="../js/popper.min.js"></script>
<!-- Bootstrap core JavaScript -->
<script type="text/javascript" src="../js/bootstrap.min.js"></script>
<!-- MDB core JavaScript -->
<script type="text/javascript" src="../js/mdb.js"></script>
<script>
  let ads = []
  function load() {

    let db = firebase.database();
    db.ref('Ads-data').on('value', function (data) {
      let r_ads = data.val();
      console.log('adfs', r_ads);
      for (cat in r_ads) {
        for (key in r_ads[cat]) {
          ads.push(r_ads[cat][key]);
        }
      }
      console.log("key", key)
      console.log('serialized adds', ads);
      display_ads(ads);
      console.log('serialized random adds', r_ads)
    })

  }
  function display_ads(ads_data) {

    let str = `<div class="row mb-4">`

    ads_data.forEach((a, i) => {
      if (i % 3 === 0 && i !== 0) {
        console.log("check for 3rd entry", i)
      }
      str += `<div class="col-md-4 mb-4">
              <!-- Card -->
              <div class="card">

                <!-- Card image -->
                <div class="view overlay">
                  <img class="card-img-top img-fluid" style="width:400px; height:200px;" src="${a.image}"
                    alt="Card image cap">
                  <a href="#!">
                    <div class="mask rgba-white-slight"></div>
                  </a>
                </div>

                <!-- Card content -->
                <div class="card-body">

                  <!-- Title -->
                  <h4 class="card-title">${a.title}</h4>
                  <!-- Text -->
                  <p class="card-text">${a.price}</p>
                  <p class="card-text">${a.description}</p>
                  <!-- Button -->
                  
                    <button class="btn btn-primary text-center" data-toggle="modal" data-target="#addDetail" onclick="fetch_add('${a.title}')">info</button>
                  

                </div>

              </div>
              <!-- Card -->
            </div>
`;
    });
    str += `</div>`
    document.getElementById('ads_div').innerHTML = str;

  }

  load();

  function fetch_add(k) {
    ads.forEach((a) => {
      if (a.title === k) {
        let md_data = `
                <!--Header-->
    <div class="modal-header">
      <p class="heading lead">Product Information</p>

      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true" class="white-text">&times;</span>
      </button>
    </div>

    <!--Body-->
    <div class="modal-body">
      <div class="text-center">
        <h2>${a.brandName}</h2>
        <img class="img-fluid" src="${a.image}" alt="Product Image" />
           
      </div>

      <div>
      <h3>${a.title}  <span class="p float-right">Price: ${a.price}</span></h3>
      <p>Person Name: ${a.personName}</p>
      <p>Number: ${a.number}</p>  
      <p>Category: ${a.select}</p>
      <p>Model: ${a.model}</p>  
      <p>Address: ${a.address}</p>  
      <p>City: ${a.city}</p>  
      <p>Number: ${a.number}</p>
      <p>Description: ${a.description}</p>  

      </div>
    </div>

    <!--Footer-->
    <div class="modal-footer justify-content-center">
      <a type="button" class="btn btn-success">Send Message <i class="fas fa-envelope ml-1 text-white"></i></a>
      <a type="button" class="btn btn-outline-success waves-effect" data-dismiss="modal">No, thanks</a>
    </div>
      `;
        document.getElementById('add-modal').innerHTML = md_data;
      }
    });

  }
  function filter(input){
   // alert(input.value)
    let ads_to_show = [];
    ads.forEach((a)=>{
      if(a.title.toLowerCase().indexOf(input.value.toLowerCase())!==-1 ||
      a.select.toLowerCase().indexOf(input.value.toLowerCase())!==-1){
        ads_to_show.push(a);
      }
    });
    display_ads(ads_to_show);
  }

  function car(){

   // alert(input.value)
    let ads_to_show = [];
    ads.forEach((a)=>{
    // alert(a.select);

      if(
      a.select == "cars"){
        ads_to_show.push(a);
      }
    });
    display_ads(ads_to_show);
  }

  function phone(){

// alert(input.value)
 let ads_to_show = [];
 ads.forEach((a)=>{
 // alert(a.select);

   if(
   a.select == "phones"){
     ads_to_show.push(a);
   }
 });
 display_ads(ads_to_show);
}

function property(){

// alert(input.value)
 let ads_to_show = [];
 ads.forEach((a)=>{
 // alert(a.select);

   if(
   a.select == "property"){
     ads_to_show.push(a);
   }
 });
 display_ads(ads_to_show);
}

function bikes(){

// alert(input.value)
 let ads_to_show = [];
 ads.forEach((a)=>{
 // alert(a.select);

   if(
   a.select == "bikes"){
     ads_to_show.push(a);
   }
 });
 display_ads(ads_to_show);
}

function laptop(){

// alert(input.value)
 let ads_to_show = [];
 ads.forEach((a)=>{
 // alert(a.select);

   if(
   a.select == "laptop"){
     ads_to_show.push(a);
   }
 });
 display_ads(ads_to_show);
}

function electronics(){

// alert(input.value)
 let ads_to_show = [];
 ads.forEach((a)=>{
 // alert(a.select);

   if(
   a.select == "electronics"){
     ads_to_show.push(a);
   }
 });
 display_ads(ads_to_show);
}

</script>

</html>